From 8a1e7bd092f9db6cc527719f8e574cf228ae0149 Mon Sep 17 00:00:00 2001
From: skyalive <>
Date: Wed, 24 Dec 2025 09:51:22 +0900
Subject: [PATCH] Fix keydesc footer check for unsigned char

---
 extfh/lib/vbisam-osscons-patch-main/libvbisam/isopen.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/extfh/lib/vbisam-osscons-patch-main/libvbisam/isopen.c b/extfh/lib/vbisam-osscons-patch-main/libvbisam/isopen.c
index 1b05ceab..6cb7a1f6 100755
--- a/extfh/lib/vbisam-osscons-patch-main/libvbisam/isopen.c
+++ b/extfh/lib/vbisam-osscons-patch-main/libvbisam/isopen.c
@@ -428,8 +428,8 @@ isopen (const char *pcfilename, int imode)
 			goto open_err;
 		}
 		pctemp = cvbnodetmp;
-		if (*(cvbnodetmp + psvbptr->inodesize - 3) != -1
-		    || *(cvbnodetmp + psvbptr->inodesize - 2) != 0x7e) {
+		if ((unsigned char)*(cvbnodetmp + psvbptr->inodesize - 3) != 0xff
+		    || (unsigned char)*(cvbnodetmp + psvbptr->inodesize - 2) != 0x7e) {
 			goto open_err;
 		}
 		ilengthused = inl_ldint (pctemp);
-- 
2.52.0

